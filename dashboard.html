<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Dashboard Pi Network</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <style>
      .crypto-slider {
        display: flex;
        overflow-x: auto;
        gap: 1rem;
        scroll-snap-type: x mandatory;
        padding-bottom: 0.5rem;
        scroll-behavior: smooth;
      }

      .crypto-group {
        display: grid;
        grid-template-columns: repeat(4, 1fr);
        gap: 0.5rem;
        min-width: 100%;
        scroll-snap-align: start;
      }

      .crypto-slider::-webkit-scrollbar {
        display: none;
      }
    </style>
  </head>
  <body class="bg-gray-100 text-gray-800 text-[10px] md:text-sm">
    <div class="min-h-screen flex flex-col">
      <header class="bg-white shadow p-3 flex justify-between items-center">
        <h1 class="text-base md:text-lg font-bold">Pi Network Crypto Dashboard</h1>
      </header>

      <main class="p-3 space-y-8">
        <section class="bg-white rounded-xl shadow p-3 md:p-5">
          <h2 class="text-base md:text-lg font-semibold text-gray-800 mb-1">Selamat Datang di TukarPi Dashboard</h2>
          <p class="text-gray-600 text-[10px]">Pantau harga pasar dan info kripto terkini, termasuk Pi Network.</p>
        </section>

        <section>
          <h2 class="text-sm md:text-base font-semibold mb-3">Harga Kripto Realtime</h2>
          <div class="crypto-slider" id="crypto-slider">
            <!-- Grup kripto akan diisi oleh JavaScript -->
          </div>
        </section>
      </main>

      <footer class="bg-white text-gray-500 text-center text-[10px] py-3 mt-auto border-t">
        <p>
          &copy; 2025 TukarPi.ID — Bantu Anda Tukar Pi dengan Aman. Made with ❤️ in Indonesia.
        </p>
        <p class="mt-1">
          Disclaimer: Data harga diambil dari CoinGecko dan dapat berubah sewaktu-waktu. TukarPi bukan bagian resmi dari Pi Network.
        </p>
      </footer>
    </div>

    <script>
      async function fetchCryptoData() {
        try {
          const response = await axios.get(
            'https://api.coingecko.com/api/v3/coins/markets',
            {
              params: {
                vs_currency: 'usd',
                ids: 'bitcoin,ethereum,tether,pi-network,binancecoin,solana,cardano,xrp,dogecoin,polkadot,litecoin,tron,avalanche,chainlink,uniswap,stellar,monero,aptos,vechain,filecoin',
                order: 'market_cap_desc',
                per_page: 24,
                page: 1,
                sparkline: false
              }
            }
          );

          const slider = document.getElementById('crypto-slider');
          slider.innerHTML = '';

          for (let i = 0; i < response.data.length; i += 4) {
            const group = document.createElement('div');
            group.className = 'crypto-group';

            response.data.slice(i, i + 4).forEach(coin => {
              const card = document.createElement('div');
              card.className = `bg-white rounded-xl shadow p-1 md:p-2 flex flex-col items-center text-center border-t-4 ${coin.price_change_percentage_24h >= 0 ? 'border-green-500' : 'border-red-500'}`;
              card.innerHTML = `
                <img src="${coin.image}" alt="${coin.name}" class="w-6 h-6 mb-1" />
                <h3 class="text-[10px] font-semibold">${coin.name} (${coin.symbol.toUpperCase()})</h3>
                <p class="text-gray-600 text-[9px] mb-1">Harga:</p>
                <p class="text-xs font-bold">$${coin.current_price.toLocaleString()}</p>
                <p class="text-[10px] ${coin.price_change_percentage_24h >= 0 ? 'text-green-600' : 'text-red-600'}">
                  ${coin.price_change_percentage_24h.toFixed(2)}% (24h)
                </p>
                <p class="text-gray-500 text-[9px] mt-1">Cap: $${coin.market_cap.toLocaleString()}</p>
              `;
              group.appendChild(card);
            });

            slider.appendChild(group);
          }
        } catch (error) {
          console.error('Gagal mengambil data kripto:', error);
        }
      }

      fetchCryptoData();
      setInterval(fetchCryptoData, 60000); // refresh tiap 1 menit

      // Geser otomatis antar grup setiap 3 detik
      let scrollIndex = 0;
      setInterval(() => {
        const slider = document.getElementById('crypto-slider');
        const groupCount = slider.children.length;
        if (groupCount === 0) return;

        scrollIndex = (scrollIndex + 1) % groupCount;
        const scrollAmount = slider.children[scrollIndex].offsetLeft;
        slider.scrollTo({ left: scrollAmount, behavior: 'smooth' });
      }, 3000);
    </script>
  </body>
</html>
